---
title: "\"install-poetry.py\"å®Ÿè¡Œæ™‚ã«ModuleNotFoundErrorãŒç™ºç”Ÿ"
emoji: "ğŸ•"
type: "tech"
topics: ["python", "poetry"]
published: true
---


# ç’°å¢ƒ
* Python3.8
* poetry 1.1.6
* Ubuntu18.04

# è©¦ã—ãŸã“ã¨
ubuntuã®dockerã‚¤ãƒ¡ãƒ¼ã‚¸ä¸Šã§pythonç’°å¢ƒã‚’æ§‹ç¯‰ã™ã‚‹éš›ã€poetryã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§`ModuleNotFoundError`ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚

ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã—ãŸã€‚

```
$ sudo apt install python3.8 python3-distutils
$ curl -sSL https://raw.githubusercontent.com/python-poetry/poetry/master/install-poetry.py |  python3.8 -
Retrieving Poetry metadata

# Welcome to Poetry!

This will download and install the latest version of Poetry,
a dependency and package manager for Python.

It will add the `poetry` command to Poetry's bin directory, located at:

/root/.local/bin

You can uninstall at any time by executing this script with the --uninstall option,
and these changes will be reverted.

Installing Poetry (1.1.6): Creating environment
Traceback (most recent call last):
  File "<stdin>", line 808, in <module>
  File "<stdin>", line 804, in main
  File "<stdin>", line 417, in run
  File "<stdin>", line 439, in install
  File "<stdin>", line 503, in make_env
ModuleNotFoundError: No module named 'virtualenv'
```

ä»¥ä¸‹ã€`install-poetry.py`ã®503è¡Œç›®ä»˜è¿‘ã§ã™ã€‚

```python
        with temporary_directory() as tmp_dir:
            subprocess.call(
                [sys.executable, "-m", "pip", "install", "virtualenv", "-t", tmp_dir],
                stdout=subprocess.PIPE,
                stderr=subprocess.STDOUT,
            )

            sys.path.insert(0, tmp_dir)

            import virtualenv
```	    
https://github.com/python-poetry/poetry/blob/4ec09d4e6b8ca007e67bb873c96277b54986fbdb/install-poetry.py#L494-L505

# ã‚¨ãƒ©ãƒ¼ã®åŸå› 
pipã‚³ãƒãƒ³ãƒ‰ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã„ãªã„ã“ã¨ãŒã€ã‚¨ãƒ©ãƒ¼ã®åŸå› ã§ã—ãŸã€‚
`subprocess.call`ã§ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ãã‚Œã‚‹ã¨ã€ã‚ˆã‹ã£ãŸã®ã§ã™ãŒã€‚ã€‚ã€‚
https://github.com/python-poetry/poetry/issues/4089

2021/05/25ç¾åœ¨ã€poetryã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•ãŒ`get-poetry.py`ã‹ã‚‰`install-poetry.py`ã¸ç§»è¡Œã™ã‚‹ã‚ˆã†ãªã®ã§ã€å°†æ¥çš„ã«ã¯è§£æ±ºã—ãã†ã§ã™ã­ã€‚

