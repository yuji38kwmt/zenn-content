---
title: "caddy: Caddyfileã®ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆãŒã‚¹ãƒšãƒ¼ã‚¹ã ã¨`input is not formatted`ã¨ã„ã†è­¦å‘ŠãŒå‡ºã‚‹"
emoji: "ğŸ˜"
type: "tech"
topics: ["web", "caddy"]
published: true
---

# å‹•ä½œç’°å¢ƒ
* XUbuntu 18.04
* cadddy v2.4.5

# ã¯ã˜ã‚ã«
[Caddy](https://caddyserver.com/)ã¨ã„ã†Webã‚µãƒ¼ãƒã‚’ä½¿ã£ã¦ã„ã¾ã™ã€‚

ä»¥ä¸‹ã®Caddyfileã‚’ä½¿ã£ã¦caddyã‚’èµ·å‹•ã—ãŸã¨ã“ã‚ã€`input is not formatted with 'caddy fmt'`ã¨ã„ã†è­¦å‘ŠãŒå‡ºã¾ã—ãŸã€‚

```plain:Caddyfile
localhost {
    file_server browse
}
```

```
$ ls
Caddyfile  hello.txt

$ sudo caddy run -config Caddyfile 
2021/09/19 23:46:39.326	INFO	using provided configuration	{"config_file": "Caddyfile", "config_adapter": ""}
2021/09/19 23:46:39.326	WARN	input is not formatted with 'caddy fmt'	{"adapter": "caddyfile", "file": "Caddyfile", "line": 2}
2021/09/19 23:46:39.327	INFO	admin	admin endpoint started	{"address": "tcp/localhost:2019", "enforce_origin": false, "origins": ["localhost:2019", "[::1]:2019", "127.0.0.1:2019"]}
2021/09/19 23:46:39.327	INFO	http	server is listening only on the HTTPS port but has no TLS connection policies; adding one to enable TLS	{"server_name": "srv0", "https_port": 443}
2021/09/19 23:46:39.327	INFO	http	enabling automatic HTTP->HTTPS redirects	{"server_name": "srv0"}
2021/09/19 23:46:39.329	INFO	tls	cleaning storage unit	{"description": "FileStorage:/home/vagrant/.local/share/caddy"}
2021/09/19 23:46:39.329	INFO	tls.cache.maintenance	started background certificate maintenance	{"cache": "0xc000378d20"}
2021/09/19 23:46:39.329	INFO	tls	finished cleaning storage units
2021/09/19 23:46:39.345	INFO	pki.ca.local	root certificate is already trusted by system	{"path": "storage:pki/authorities/local/root.crt"}
2021/09/19 23:46:39.345	INFO	http	enabling automatic TLS certificate management	{"domains": ["localhost"]}
2021/09/19 23:46:39.345	WARN	tls	stapling OCSP	{"error": "no OCSP stapling for [localhost]: no OCSP server specified in certificate"}
2021/09/19 23:46:39.346	INFO	autosaved config (load with --resume flag)	{"file": "/home/vagrant/.config/caddy/autosave.json"}
2021/09/19 23:46:39.346	INFO	serving initial configuration

```

# è­¦å‘Šã®åŸå› 
Caddyfileã‚’`caddy fmt`ã‚³ãƒãƒ³ãƒ‰ã§ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã—ãŸã€‚

```
$ caddy fmt -overwrite Caddyfile
```

Caddyfileã‚’ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã™ã‚‹ã¨ã€ä»¥ä¸‹ã®å†…å®¹ã«ãªã‚Šã¾ã™ã€‚

```plain:Caddyfile
localhost {
	file_server browse
}
```	

ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆãŒç©ºç™½ã‹ã‚‰ã‚¿ãƒ–ã«å¤‰æ›ã•ã‚Œã¾ã—ãŸã€‚
ã©ã†ã‚„ã‚‰ã€ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆã¯ã‚¿ãƒ–ã®æ–¹ãŒæ¨å¥¨ã•ã‚Œã‚‹ãã†ã§ã™ã€‚

# å‚è€ƒã‚µã‚¤ãƒˆ
* https://caddyserver.com/docs/caddyfile
