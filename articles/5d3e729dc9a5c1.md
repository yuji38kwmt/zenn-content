---
title: "Caddyï¼šCaddyfileã«`localhost`ã‚’æŒ‡å®šã™ã‚‹ã¨ã€https://127.0.0.1/ ã§ã¯ã‚¢ã‚¯ã‚»ã‚¹ã§ããªã„"
emoji: "ğŸ‘»"
type: "tech"
topics: ["web", "caddy"]
published: true
---

# å‹•ä½œç’°å¢ƒ
* XUbuntu 18.04
* cadddy v2.4.5

# ã¯ã˜ã‚ã«
[Caddy](https://caddyserver.com/)ã¨ã„ã†Webã‚µãƒ¼ãƒã‚’ä½¿ã£ã¦ã„ã¾ã™ã€‚

ä»¥ä¸‹ã®Caddyfileã‚’ä½¿ã£ã¦caddyã‚’èµ·å‹•ã—ã¾ã™ã€‚

```plain:Caddyfile
localhost
respond "Hello, world!"
```


https://localhost ã«ã¯ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã™ãŒã€https://127.0.0.1/ ã«ã¯ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã›ã‚“ã€‚
ã“ã‚Œã¯ãªãœã§ã—ã‚‡ã†ã‹ï¼Ÿ

```
$ curl https://localhost
Hello, world!$ 

$ curl  https://127.0.0.1/
curl: (35) error:14094438:SSL routines:ssl3_read_bytes:tlsv1 alert internal error
```

# åŸå› 

https://caddyserver.com/docs/caddyfile/concepts#addresses ã«ä»¥ä¸‹ã®ã‚ˆã†ã«è¨˜è¼‰ã•ã‚Œã¦ã„ã¾ã™ã€‚

>If you specify a hostname, only requests with a matching Host header will be honored. In other words, if the site address is localhost, then Caddy will not match requests to 127.0.0.1.

ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ˜ãƒƒãƒ€`Host`ãŒä¸€è‡´ã—ã¦ã„ã‚‹ã‹ã©ã†ã‹ã‚’ç¢ºèªã—ã¦ã„ã‚‹ãŸã‚ã€ https://127.0.0.1/ ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ããªã„ã‚ˆã†ã§ã™ã€‚

ä»¥ä¸‹ã®ã‚ˆã†ã«ã€è¤‡æ•°ã®ãƒ›ã‚¹ãƒˆã‚’ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šã§æŒ‡å®šã™ã‚‹ã“ã¨ã§ã€https://localhost ã¨ https://127.0.0.1/ ã®ä¸¡æ–¹ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã™ã€‚

```plain:Caddyfile
localhost, 127.0.0.1
respond "Hello, world!"
```

```
$ curl https://127.0.0.1/
Hello, world!$ curl https://localhost/
Hello, world!$ 
```

# è£œè¶³
è¤‡æ•°ã®ãƒ›ã‚¹ãƒˆã‚’æŒ‡å®šã™ã‚‹å ´åˆã€ã‚«ãƒ³ãƒã®å¾Œã‚ã«ã¯ã‚¹ãƒšãƒ¼ã‚¹ãŒå¿…è¦ã§ã™ã€‚
ã‚«ãƒ³ãƒã®å¾Œã‚ã«ã‚¹ãƒšãƒ¼ã‚¹ãŒãªã„ã¨ã€ä»¥ä¸‹ã®ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã™ã€‚

```
$ sudo caddy run -config Caddyfile 
2021/09/20 01:00:29.692	INFO	using provided configuration	{"config_file": "Caddyfile", "config_adapter": ""}
run: adapting config using caddyfile: Caddyfile:1 - Error during parsing: Site addresses cannot contain a comma ',': 'localhost,127.0.0.1' - put a space after the comma to separate site addresses
```


